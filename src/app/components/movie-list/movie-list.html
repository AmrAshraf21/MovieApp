<section class="movies">

    <div class="container">
        <div class="search-wrapper">
            
            <h2>Welcome To our movie app</h2>
            <p>Millions of movies, TV shows and people to discover. Explore now.</p>
            <div class="search-container">
                <div class="p-inputgroup">
                    <input 
                    type="text" 
                    pInputText 
                    [(ngModel)]="searchQuery" 
                    placeholder="Search and explore movies..."
                    (keyup.enter)="searchMovies()"
                    />
                    <button 
                    pButton 
                    icon="pi pi-search" 
                    (click)="searchMovies()"
                    >Search</button>
                </div>
            </div>
        </div>
        
        <p class="now">Now Playing </p>
      
      
        @if (isLoading()) {
            <div class="loading">
                <p-progressSpinner></p-progressSpinner>
            </div>
        } @else {
            <div class="movie-grid">
                <!-- <div class="wrapper"> -->

                    @for (movie of movies(); track movie.id) {
                        <app-movie-card [movie]="movie"></app-movie-card>
                    }
                <!-- </div> -->
            </div>
            
            @if (totalRecords() > 20) {
                <p-paginator 
                [rows]="20" 
                [totalRecords]="totalRecords()" 
                [pageLinkSize]="10"
                (onPageChange)="onPageChange($event)"
                [first]="(currentPage() - 1) * 20"
                ></p-paginator> 
                
                
            }
        }
</div>
</section>

<!-- <p-carousel [value]="movies()" [numVisible]="3" [numScroll]="3" [circular]="false">
  <ng-template let-movie #item>
    <div class="border border-surface rounded-border m-2 p-4">
      <div class="mb-4">
        <div class="relative mx-auto">
          <img 
            [src]="'https://image.tmdb.org/t/p/w342' + movie.poster_path"
            [alt]="movie.title"
            class="w-full rounded-border"
          />
          <!-- Remove p-tag unless you have a movie-related status -->
        <!-- </div>
      </div>
      <div class="mb-4 font-medium">{{ movie.title }}</div>
      <div class="flex justify-between items-center">
        <div class="mt-0 font-semibold text-xl">
          â˜… {{ movie.vote_average }}
        </div>
        <span>
          <p-button icon="pi pi-heart" severity="secondary" [outlined]="true" />
          <p-button icon="pi pi-info-circle" styleClass="ml-2" />
        </span>
      </div>
    </div>
  </ng-template> -->
<!-- </p-carousel> -->