import{a as H,b as U}from"./chunk-5RVFC2NL.js";import"./chunk-ON6OCHY6.js";import{a as N}from"./chunk-RJEZB4OS.js";import"./chunk-2BKU6BO7.js";import{a as j,b as A}from"./chunk-UUVJK3OX.js";import{a as V}from"./chunk-6ZUBIQD6.js";import{a as B}from"./chunk-55RFZDUZ.js";import"./chunk-VU3HS2LR.js";import{b as $}from"./chunk-IQWOGYRB.js";import{b as k,h as I,i as z,p as Q,r as q,s as F,v as W,w as D}from"./chunk-KIZG7WGD.js";import"./chunk-HEVQ3NIT.js";import{$b as b,Ea as y,Ia as r,Nb as s,Ob as E,Pb as u,T as d,Ta as R,Wb as O,Y as v,Z as P,_b as C,ac as S,fa as p,hc as L,ib as m,jb as _,mb as w,nb as T,ob as g,pb as i,qb as o,rb as l,vb as x,yb as M,zb as a}from"./chunk-2XIWJZZI.js";var K=e=>["/movies",e],X=e=>({active:e}),Y=(e,n)=>n.id;function Z(e,n){if(e&1&&s(0),e&2){let t=a();u(' Search Results for "',t.searchQuery(),'" ')}}function ee(e,n){e&1&&s(0," Search Movies ")}function te(e,n){e&1&&(i(0,"div",2),l(1,"p-progressSpinner"),o())}function ne(e,n){if(e&1&&l(0,"img",9),e&2){let t=a().$implicit;g("alt",t.title)}}function ie(e,n){if(e&1&&(l(0,"img",10),C(1,"posterUrl")),e&2){let t=a().$implicit;g("src",S(1,2,t.poster_path,"w342"),y)("alt",t.title)}}function oe(e,n){if(e&1){let t=x();s(0," . "),i(1,"div",7)(2,"div",8),m(3,ne,1,1,"img",9)(4,ie,2,5,"img",10),i(5,"div",11)(6,"h3",12),s(7),o(),i(8,"app-heart-icon",13),M("click",function(h){let f=v(t).$implicit,J=a(3);return P(J.toggleWishlist(h,f))}),o()()(),i(9,"div",14)(10,"div",15)(11,"span",16),s(12),C(13,"monthTranform"),o(),i(14,"span",17),l(15,"i",18),s(16),C(17,"number"),o()()()()}if(e&2){let t=n.$implicit,c=a(3);r(),g("routerLink",O(14,K,t.id)),r(2),_(t.poster_path?4:3),r(4),E(t.title),r(),g("ngClass",O(16,X,c.isInWishlist(t)))("size","2rem")("color","#10258f")("filled",c.isInWishlist(t)),r(4),u("",b(13,9,t.release_date)," "),r(4),u(" ",S(17,11,t.vote_average,"1.1-1")," ")}}function re(e,n){if(e&1){let t=x();i(0,"p-paginator",19),M("onPageChange",function(h){v(t);let f=a(3);return P(f.onPageChange(h))}),o()}if(e&2){let t=a(3);g("rows",20)("totalRecords",t.totalRecords())("pageLinkSize",5)("first",(t.currentPage()-1)*20)}}function ae(e,n){if(e&1&&(i(0,"div",5),w(1,oe,18,18,null,null,Y),o(),m(3,re,1,4,"p-paginator",6)),e&2){let t=a(2);r(),T(t.movies()),r(2),_(t.totalRecords()>20?3:-1)}}function se(e,n){if(e&1&&(i(0,"div",3),l(1,"i",20),i(2,"h3"),s(3),o(),i(4,"p"),s(5,"Try different keywords or check your spelling"),o()()),e&2){let t=a(2);r(3),u('No results found for "',t.searchQuery(),'"')}}function ce(e,n){e&1&&(i(0,"div",4),l(1,"i",21),i(2,"h3"),s(3,"Enter a search term to find movies"),o()())}function le(e,n){if(e&1&&m(0,ae,4,1)(1,se,6,1,"div",3)(2,ce,4,0,"div",4),e&2){let t=a();_(t.movies().length>0?0:t.searchQuery()?1:2)}}var G=class e{apiService=d(j);route=d(Q);router=d(q);languageService=d(V);wishlistService=d(D);movies=p([]);searchQuery=p("");totalRecords=p(0);currentPage=p(1);isLoading=p(!1);constructor(){this.route.queryParams.subscribe(n=>{this.searchQuery.set(n.query||""),this.currentPage.set(n.page||1),this.searchQuery()&&this.loadSearchResults()}),L(()=>{let n=this.languageService.getCurrentLanguage()();this.searchQuery()&&this.loadSearchResults()})}loadSearchResults(){this.isLoading.set(!0),this.apiService.searchMovies(this.searchQuery(),this.languageService.getCurrentLanguage()(),this.currentPage()).subscribe({next:n=>{this.movies.set(n.results),this.totalRecords.set(n.total_results),this.isLoading.set(!1)},error:()=>this.isLoading.set(!1)})}onPageChange(n){this.router.navigate([],{relativeTo:this.route,queryParams:{page:n.page+1},queryParamsHandling:"merge"})}toggleWishlist(n,t){n.stopPropagation(),n.preventDefault(),this.wishlistService.toggleWishlist(t,"movie")}isInWishlist(n){return this.wishlistService.isInWishlist(n.id,"movie")}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=R({type:e,selectors:[["app-search-results"]],decls:9,vars:3,consts:[[1,"search-results-container"],[1,"search-header"],[1,"loading"],[1,"no-results"],[1,"no-query"],[1,"results-grid"],[3,"rows","totalRecords","pageLinkSize","first"],[1,"movie-card",3,"routerLink"],[1,"poster-container"],["src","images/no-image.jpg",3,"alt"],[1,"poster",3,"src","alt"],[1,"first-ele"],[1,"title"],[1,"wishlist-button",3,"click","ngClass","size","color","filled"],[1,"movie-info"],[1,"details"],[1,"release-date"],[1,"rating"],[1,"pi","pi-star-fill"],[3,"onPageChange","rows","totalRecords","pageLinkSize","first"],[1,"pi","pi-search",2,"font-size","2rem"],[1,"pi","pi-info-circle",2,"font-size","2rem"]],template:function(t,c){t&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),m(3,Z,1,1)(4,ee,1,0),o(),i(5,"p"),s(6),o()(),m(7,te,2,0,"div",2)(8,le,3,1),o()),t&2&&(r(3),_(c.searchQuery()?3:4),r(3),u("Found ",c.totalRecords()," results"),r(),_(c.isLoading()?7:8))},dependencies:[z,k,I,B,N,$,W,F,U,H,A],styles:[".search-results-container[_ngcontent-%COMP%]{padding:2rem;width:80%;margin:0 auto}.search-results-container[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#a09191;font-size:30px;text-align:center}.search-results-container[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0 0;color:#587d7d;font-size:20px;text-align:center}.search-results-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-evenly}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .movie-card[_ngcontent-%COMP%]{width:20%;border-radius:10px;margin:1rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .movie-card[_ngcontent-%COMP%]   .poster-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .movie-card[_ngcontent-%COMP%]   .first-ele[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 .5rem}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .movie-card[_ngcontent-%COMP%]   .first-ele[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;padding:0 .5rem;justify-content:space-between}.search-results-container[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]   .movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:gold}.search-results-container[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%], .search-results-container[_ngcontent-%COMP%]   .no-query[_ngcontent-%COMP%]{text-align:center;padding:3rem;background:var(--surface-card);border-radius:8px}.search-results-container[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .search-results-container[_ngcontent-%COMP%]   .no-query[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0 .5rem;color:red}.search-results-container[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .search-results-container[_ngcontent-%COMP%]   .no-query[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary-color);margin:0}"]})};export{G as SearchResultsComponent};
